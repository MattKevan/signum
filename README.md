# Signum - Design Document (Revision 5.0)

Signum is a decentralised publishing platform where users retain complete ownership of their content and identity. It's designed to be as simple as possible to get started, while providing robust curation, moderation, and multi-format publishing capabilities.

Content is primarily structured as plain text files with minimal formatting (Markdown for content, YAML for configuration). The Signum client application is responsible for content creation, site management, Static Site Generation (SSG), and publishing a comprehensive bundle.

Published sites consist of two primary components:
1.  **Static HTML/CSS Site:** Generated by the Signum client (acting as an SSG), offering excellent SEO, accessibility, and performance, viewable in any standard web browser. This is the primary output for general web consumption.
2.  **Raw Source Content:** The original Markdown/YAML source files, configuration, images, and site data (including drafts) are also included in the published bundle. This allows other Signum clients or alternative protocol clients (e.g., TUI, Gemini) to consume and render the content in their own way, ensuring data portability and longevity.

Social graph features (follows, curations, likes) are managed through user-owned static YAML files, included in the published bundle, and processed client-side by Signum applications.

## Core principles:

*   **User ownership:** Content (source and generated), identity, and data belong entirely to users, anchored by cryptographic keys derived from a master seed phrase. Source content (Markdown/YAML) is always preserved and owned by the user.
*   **Privacy by design:** No tracking, analytics, or surveillance in the core protocol or default published outputs.
*   **Simplicity first:** Content creation in Markdown; client application handles SSG, theming (future), and publishing complexity. Zero external configuration required.
*   **Multi-Format Publishing & Presentation:** The client generates static HTML/CSS sites for broad web access while also publishing the raw source content for maximum flexibility, data portability, and consumption by diverse clients.
*   **Progressive decentralization:** Users can start with hosted convenience and migrate to full self-hosting as they mature, maintaining ownership and portability throughout.
*   **Open and decentralized:** No vendor lock-in, utilizing open protocols and formats. Sites are pure static file bundles uploadable to any HTTP host.

## 1. Platform Architecture Overview

### 1.1 System Components

The Signum ecosystem comprises three primary components: user clients, hosting infrastructure (including optional first-party hosting), and an optional discovery network. No external services, databases, or configuration required for core functionality.

**User clients (Desktop/Web/Mobile):**
These are lightweight applications that function as enhanced RSS readers and markdown editors with publishing capabilities. They handle:
*   **Identity Management:** Creation and management of device passkeys for secure authentication. Derivation of site-specific cryptographic keys from passkey credentials.
*   Content creation (Markdown editor with support for relative image paths to a centralized `content/images/` folder) and site configuration (YAML).
*   **Data Sync & Backup:**
    *   QR code-based sync for transferring data between devices.
    *   JSON export/import for backup and device migration.
    *   Optional secure key backup via Signum hosting service.
*   **Site Output Preparation (SSG & Bundling):**
    *   **Static Site Generation (SSG):** Generating a complete static HTML/CSS site (no client-side JavaScript for core rendering) from public Markdown/YAML sources, applying a selected theme's templates and styles. Drafts are excluded from HTML generation.
    *   **Source Content Packaging:** Ensuring all source files (public content, drafts, configuration, images, social YAMLs) are included in a dedicated subdirectory (e.g., `_signum/`) within the final bundle for publishing.
*   Publishing the complete bundle to hosting providers (self-hosted or Signum hosting service).
*   **Content Consumption:** RSS feed aggregation, social graph processing (reading YAML files from followed sites), and content rendering.
*   **Social Features:** Client-side processing of follows, likes, curations, and distributed moderation.

**Hosting infrastructure:**
Multiple hosting options are available to users:

*   **Signum Hosting Service (First-Party):**
    *   **Free Tier:** Subdomain hosting (username.signum.com) with basic features
    *   **Pro Tier:** Custom domain support, advanced analytics, increased storage, priority support
    *   **Secure Key Management:** Optional encrypted key backup and recovery service
    *   **One-Click Publishing:** Direct integration with Signum clients for seamless deployment
    *   **Data Portability:** Complete bundle export available at any time for migration to other hosts

*   **Self-Hosting:** Any basic HTTP server can host a Signum published bundle. This bundle will contain:
    *   The generated static HTML site at its root (for web browsers).
    *   A dedicated subdirectory (e.g., `_signum/`) containing raw source content and metadata.
    *   `rss.xml` (at the bundle root, linking to HTML pages).

*   **Third-Party Static Hosting:** Compatible with GitHub Pages, Netlify, Vercel, and other static hosting platforms.

**Discovery network (optional):**
Consists of independent server-side web applications (indexers) that users can optionally announce their sites to. These are full-blown search engines and content discovery platforms, separate from client applications. They are solely for content and site discovery (e.g., search by keyword/tag, identifying trending content based on site updates), not for social graph aggregation. Indexers will be an open standard, enabling anyone to host their own. Specialized indexers focusing on specific types of content (publications, academic papers, news, etc.) can be created by third parties.

### 1.2 Data Flow

**User Setup & Identity:**
The user initializes their Signum identity within the client using device passkeys (Face ID, Touch ID, Windows Hello, etc.). The client derives site-specific cryptographic keys from the passkey credentials. If using Signum hosting, keys can be securely backed up to enable cross-device recovery.

**Site Creation & Content Authoring:**
When creating a new site, the client derives a site-specific key pair and Site ID from the user's passkey identity. The user creates content in Markdown (referencing images from a central `content/images/` folder using relative paths) and manages YAML files. Drafts are stored locally and included in the published bundle's `_signum/drafts/` directory (as raw Markdown, not rendered to HTML).

**Device Sync & Data Management:**
Users can sync their data between devices via QR codes or JSON export/import. For users of Signum hosting, secure key backup enables seamless device addition and recovery without manual export/import processes.

**Site Output Preparation (Client-Side Build & Bundle Assembly):**
Before publishing, the client processes the user's source content for a specific site:
1.  **Static Site Generation (SSG):** It acts as an SSG to produce static HTML files and CSS (no client-side JS for rendering) for web browser viewing. This HTML/CSS output forms the root of the published bundle. This process excludes drafts from HTML generation. Images referenced in public content are copied to an appropriate assets location at the bundle root (e.g., `images/`).
2.  **Signum Data Packaging:** The original `content/` directory (public Markdown, source images), `drafts/` directory (draft Markdown files), `site.yaml`, social YAMLs, and other metadata are packaged into a dedicated subdirectory (e.g., `_signum/`).
3.  **Metadata Generation:** An `rss.xml` feed (at bundle root, linking to HTML pages) and a comprehensive `manifest.json` (inside `_signum/`) are generated. An `index.html` is also placed inside `_signum/`.

**Publishing:**
The user publishes the complete bundle (generated static HTML site at root, `_signum/` subdirectory) using one of several options:
*   **Signum Hosting:** One-click publishing to username.signum.com (free) or custom domain (paid). Integrated directly into the client for seamless deployment.
*   **Manual Upload:** Download the bundle as a ZIP archive for manual upload via FTP to any hosting provider.
*   **API-Based Deployment:** Automated deployment to compatible static hosts (Netlify, Vercel, GitHub Pages, etc.) via hosting adapters.

**Content consumption (Public Viewers):**
Users view the published static HTML site directly in any standard web browser from the root of the hosted bundle.

**Content consumption & social interaction (Signum Clients & Alternative Clients):**
Signum client applications (or other clients like TUIs, Gemini clients) can:
*   Fetch and parse `_signum/manifest.json` to discover content.
*   Fetch raw Markdown/YAML source files (from `_signum/content/`) and image files (from `_signum/content/images/`) for custom rendering and processing.
*   Fetch draft content (from `_signum/drafts/`) for editing if authenticated as the site owner.
*   Fetch social YAMLs (from `_signum/`) for building social graphs.
*   Utilize `rss.xml` (from bundle root) for updates.

## 2. Technical specifications

### 2.1 Content Format and Published Bundle Structure

#### 2.1.1 Source Content Structure (Managed by Client)
*   **Root Directory (per site, local client storage):**
    *   `site.yaml`: Main site configuration.
    *   `follows.yaml`, `blocks.yaml`, `curations.yaml`, `likes.yaml`: Public social interaction files.
    *   `content/` (directory):
        *   `index.md`: Source for the site's homepage.
        *   `about.md`, `contact.md`, etc.: Source for top-level pages.
        *   `images/`: Centralized folder for all site source images.
        *   `posts/` (subdirectory example for a collection):
            *   `my-first-post.md`
        *   Other collection subdirectories.
    *   `drafts/` (directory):
        *   `draft-post.md`: Draft content (not rendered to HTML)
        *   Other draft files organized as needed.

#### 2.1.2 Site Configuration (`site.yaml`)
Contains site title, description, author, global timestamps. Optionally:
*   `theme`: Identifier for a selected theme (future feature).
*   `collections`: Array to explicitly define collection paths (e.g., "posts") relative to `content/`, their navigation labels, and sorting preferences. Structure includes `path`, `nav_label`, `sort_by`, `sort_order`.
*   `style_hints`: Basic theming overrides.

#### 2.1.3 Content Format (Markdown + YAML Frontmatter)
Content written in standard Markdown. Each file can include a YAML frontmatter block for metadata (title, date, summary, tags). Public content files must not contain embedded HTML or JavaScript. Images referenced using relative paths, pointing to `content/images/`. Drafts stored as regular Markdown files in the `drafts/` directory, included in published bundles but not rendered to HTML.

#### 2.1.4 Published Bundle Structure (Uploaded to Host)
The root of this directory is the static HTML site.
*   **Bundle Root (HTML Site Root):**
    *   `index.html` (generated homepage)
    *   `about.html` or `about/index.html` (generated page)
    *   `posts/index.html` (generated listing page for posts collection)
    *   `posts/my-first-post.html` or `posts/my-first-post/index.html` (generated post)
    *   `css/` (directory for theme CSS, e.g., `theme.css`)
    *   `images/` (directory for images used in the HTML site, copied/processed from `_signum/content/images/`)
    *   `assets/` (optional, for other theme-specific static assets)
    *   `rss.xml`
    *   `sitemap.xml` (optional)
*   **`_signum/` (Subdirectory):**
    *   `index.html`: Simple HTML page explaining this directory and providing a CTA to download/open Signum client. May include `<link rel="signum-manifest" href="manifest.json">`.
    *   `manifest.json`: Comprehensive JSON manifest for the Signum bundle (see details below).
    *   `site.yaml`: Copy of the site's source configuration.
    *   `follows.yaml`, `blocks.yaml`, etc.: Copies of public social interaction files.
    *   `content/` (directory): Copy of user's public source Markdown and original `images/` subdirectory.
    *   `drafts/` (directory): Copy of user's draft Markdown files (not rendered to HTML, but available for other Signum clients).

#### 2.1.5 Manifest (`_signum/manifest.json` - Comprehensive)
Located at `_signum/manifest.json`. It acts as a detailed table of contents for the Signum-specific data and maps it to the generated HTML site.
Key fields include: `siteId`, `title`, `description`, `lastUpdatedSite`, `generator` version, `signum_data_root` (value: `"."` relative to this manifest's location), `html_site_root_in_bundle` (value: `"../../"` or similar to point from `_signum` to the bundle root), `source_content_root` (e.g., `content/`), `drafts_root` (e.g., `drafts/`), `source_images_root` (e.g., `content/images/`), `published_images_root_in_html_site` (e.g., `images/` relative to HTML root). Lists paths (relative to `_signum/`) to `social_configs` and the path to `rss_feed_in_html_site` (relative to bundle root).
The `entries` array describes each piece of renderable public content, with `type`, `status`, `sourcePath` (within `_signum/content/`), `htmlPath` (at bundle root), `urlPath`, `title`, `date`, etc.
The `drafts` array describes draft content with `sourcePath` (within `_signum/drafts/`), `title`, `date`, etc. (no `htmlPath` as drafts aren't rendered).
The `image_assets` array maps image `sourcePath` (within `_signum/content/images/`) to their `publicPath` (at bundle root, e.g., `images/my-image.jpg`).

#### 2.1.6 RSS Feed (`rss.xml`)
Located at the root of the published bundle (HTML site root). Standard RSS/Atom feed. Links point to generated static HTML page URLs.

### 2.2 Cryptographic Identity System & Data Management

**Passkey-Based Identity:**
User identity is anchored by device passkeys (biometric or PIN-based authentication). The client uses passkey credentials to derive site-specific cryptographic keys, ensuring consistent identity across sessions while leveraging familiar, secure authentication methods.

**Site-Specific Keys & Site ID:**
Unique Ed25519 key pair per site, derived from passkey credentials. Site ID is `SHA256(site_specific_public_key)`.

**Data Sync & Backup:**
*   **Local Storage:** Primary storage for drafts, preferences, and site data using browser IndexedDB or native storage.
*   **QR Code Sync:** Transfer data between devices by generating QR codes containing encrypted sync data.
*   **JSON Export/Import:** Manual backup and restore via downloadable JSON files.
*   **Signum Hosting Backup (Optional):** For users of Signum hosting, encrypted key backup enables seamless device recovery and cross-device sync without manual processes.

**Cross-Device Recovery:**
*   **Self-Hosted Users:** Recover via QR code sync from existing device or import backup JSON file.
*   **Signum Hosted Users:** Authenticate with passkey on new device, automatically restore keys and data from secure backup.

### 2.3 Hosting Architecture & Publishing

**Publishing Options:**
The client's "Publishing Service" prepares the complete bundle and offers multiple deployment options:

*   **Signum Hosting Service:**
    *   **Free Tier:** Subdomain hosting (username.signum.com), basic analytics, community support
    *   **Pro Tier:** Custom domain, advanced analytics, unlimited storage, priority support
    *   **Secure Key Management:** Encrypted key backup using enterprise-grade security
    *   **One-Click Publishing:** Direct integration with clients for seamless deployment
    *   **Data Export:** Complete bundle export available at any time for migration

*   **Self-Hosting Options:**
    *   **Download Bundle (ZIP):** Client packages bundle for manual upload
    *   **API-Based Static Hosts:** Adapters for deploying to various static hosting services
    *   **Direct Upload:** Future support for FTPS/SFTP in native clients

**Hosting Requirements:**
All hosting options serve static files and must allow GET access to:
*   HTML site at bundle root
*   Files and subdirectories within `_signum/` (including `manifest.json`, `content/`, `drafts/`)
CORS headers (e.g., `Access-Control-Allow-Origin: *`) essential for files within `_signum/` if fetched by web clients from different origins.

### 2.4 Social Features System (Client-Centric)

Social features in Signum are managed and experienced primarily within the client application using public YAML files processed client-side.

**Following system:** Users define sites they follow in their `follows.yaml` file. Client applications fetch these files from followed sites (and potentially "sites of followed sites" up to a defined depth) to construct a local social graph. Blocking a site (via `blocks.yaml`) filters content from that site out of the user's view.

**Content likes (public bookmarks):** When a user "likes" a piece of content, its URL is added to their public `likes.yaml` file. This acts as a public bookmark. Other users' clients can discover these likes by fetching the `likes.yaml` file from the liker's site. There is no central aggregation of like counts. The `allow_likes` field in a post's frontmatter signals the author's consent for their content to be listed in this manner.

**Curation lists:** Users can create public collections of content links with optional notes in their `curations.yaml` file. Clients can fetch and display these lists, enabling cross-site content discovery based on user taste.

**Distributed moderation:** Moderation is primarily user-controlled via their personal `blocks.yaml` file. Clients use this list to filter content from their feeds. Optionally, clients may allow users to import or consult `blocks.yaml` files from other sites, trusted community members or designated "moderator" sites. There is no central moderation authority; indexers, if used, would focus on spam/abuse detection from a site discovery perspective to maintain the quality of their search results.

## 3. Client Implementation

### 3.1 Technology Stack
*   **Frontend Framework:** Next.js (App Router) for web clients, React Native for mobile, Tauri for desktop.
*   **Language:** TypeScript.
*   **Core Functionality:** Enhanced RSS reader and Markdown editor with Static Site Generation capabilities.
*   **SSG & Templating:** Transforms Markdown and site data into static HTML strings (HTML/CSS-only output). Libraries for Markdown, YAML, crypto, dates.
*   **Styling:** Tailwind CSS for client UI. Themes provide static CSS for published sites (future).
*   **Authentication:** WebAuthn/Passkey APIs for secure, familiar authentication.
*   **Local Storage:** IndexedDB for web clients, native storage for mobile/desktop apps.
*   **Sync & Backup:** QR code generation/scanning, JSON export/import, optional cloud backup integration.

### 3.2 Application Architecture
*   **Auth Service:** Manages passkey authentication, derives site-specific keys, handles secure key storage and recovery.
*   **Content Management Service:** Manages local editing of public content (in `content/`) and drafts (in `drafts/`).
*   **RSS & Feed Service:** Aggregates RSS feeds from followed sites, processes social YAML files, builds local social graph.
*   **Site Build Service (SSG Engine & Bundler):**
    *   Loads public source, drafts, `site.yaml`. 
    *   Generates static HTML/CSS site (to bundle root) using themes (future) or defaults, excluding drafts.
    *   Packages source files (`content/`, `drafts/`, `site.yaml`, social YAMLs) into `_signum/`.
    *   Generates `rss.xml` (bundle root) and `_signum/manifest.json`.
*   **Publishing Service:** Handles deployment to Signum hosting, self-hosting, or third-party platforms.
*   **Sync & Backup Service:** QR code sync, JSON export/import, integration with Signum hosting backup service.
*   **Discovery Service:** Interfaces with indexers for content discovery and site announcement.

### 3.3 Key Components
*   **Enhanced RSS Reader:** Aggregates feeds from followed sites, displays unified timeline, processes social YAML files.
*   **Markdown Editor:** Handles relative image paths to `content/images/`, live preview, draft management.
*   **Site Builder & Bundle Preparer:** UI for SSG, bundling, theme selection (future), publishing options.
*   **Publishing Interface:** One-click publishing to Signum hosting, manual export, third-party platform integration.
*   **Social Graph Manager:** Processes follows, likes, curations, and blocks from distributed YAML files.
*   **Discovery Interface:** Search and browse content via indexers, trending content, site recommendation.
*   **Identity & Sync Management:** Passkey setup, QR code sync, backup/restore, account recovery.
*   **Hosting Dashboard:** For Signum hosting users - analytics, domain management, billing, data export.

### 3.4 Data Recovery & Multi-Device Support

**Initial Setup:**
1. User creates account with device passkey (Face ID/Touch ID/PIN)
2. Client derives site keys from passkey credentials
3. Optional: Enable Signum hosting for automatic backup
4. User begins creating content and drafts

**Adding New Device (Signum Hosting Users):**
1. Install app on new device
2. "Sign in to existing account" → passkey authentication
3. Keys and data automatically restored from secure backup
4. Ready to use immediately

**Adding New Device (Self-Hosted Users):**
1. Install app on new device  
2. "Import account" → scan QR code from existing device or import JSON file
3. Passkey setup on new device
4. Both devices now in sync

**Data Recovery:**
1. **Signum Hosting Users:** Authenticate with passkey on any device → full restoration
2. **Self-Hosted Users:** Import backup JSON file or sync from another device
3. **Partial Recovery:** Some data (site keys, configurations) can be re-derived from passkey even without backup

**Backup Strategy:**
- **Automatic:** Signum hosting users get continuous secure backup
- **Manual:** Regular JSON export reminders and download prompts
- **Cross-Device:** QR codes for immediate device-to-device transfer

## 4. Signum Hosting Service

### 4.1 Service Tiers

**Free Tier (username.signum.com):**
*   Subdomain hosting with SSL
*   Basic site analytics
*   100MB storage limit
*   Community support
*   Secure key backup and recovery
*   One-click publishing from clients
*   Full data export capabilities

**Pro Tier ($5-10/month):**
*   Custom domain support
*   Advanced analytics and insights
*   Unlimited storage
*   Priority support
*   Collaboration features (future)
*   Advanced security options
*   API access for automation

**Enterprise Tier ($50+/month):**
*   Multiple custom domains
*   Team management and permissions
*   Advanced security and compliance
*   SLA guarantees
*   Dedicated support
*   White-label options

### 4.2 Key Management & Security

**Secure Key Backup:**
*   Keys encrypted using enterprise-grade security (AES-256-GCM)
*   Hardware Security Module (HSM) storage
*   Multi-factor recovery process (passkey + email verification)
*   Zero-knowledge architecture - Signum cannot decrypt user content

**Data Protection:**
*   End-to-end encryption for sensitive data
*   Regular security audits and compliance reviews
*   Transparent key management practices
*   User control over backup and recovery methods

### 4.3 Business Model & Sustainability

**Revenue Streams:**
*   Pro/Enterprise subscription tiers
*   Custom domain management fees
*   Advanced analytics and insights
*   Enterprise features and support
*   Potential future: marketplace for themes and plugins

**Value Proposition:**
*   **For Users:** Hassle-free hosting with full data ownership
*   **For Ecosystem:** Revenue funds client development and indexer infrastructure
*   **For Migration:** Easy path from hosted to self-hosted as users mature

### 4.4 Data Portability & Migration

**Export Capabilities:**
*   Complete site bundle download at any time
*   Bulk export of all user sites and data
*   Migration tools for moving to self-hosting
*   Open format standards ensure compatibility

**Migration Path:**
1. Start with free Signum hosting (ease of use)
2. Upgrade to Pro for custom domain (professional presence)
3. Optional migration to self-hosting (full independence)
4. Always maintain ability to move between options

## 5. Hosting Infrastructure
Serves static files from the published bundle directory. Root is the HTML site; `_signum/` contains source/meta data including drafts.

## 6. Discovery and Indexing (Content/Site Focused)

### 6.1 Indexer Network

The discovery network is an optional layer designed to help users find Signum sites and content.

**Purpose:** Primarily for content and site discovery through search (keywords, tags) and identifying trending content based on site update frequency or content signals (not social metrics). Indexers may also perform basic spam and abuse detection on announced sites to maintain index quality. Indexers do not aggregate social graphs, follows, or likes.

**Architecture:** The network consists of multiple independent indexers. Clients can be configured to use one or more indexers, with support for fallback and redundancy. This avoids a single point of failure for content discovery, though core publishing and client-side social features function independently of indexers.

**API Specification:** Indexers will expose a simple API, likely including endpoints to:
* Announce a site or site update (providing site URL, metadata, tags, and potentially a signature for verification).
* Search for sites/content by keywords or tags.
* Retrieve a list of trending content (based on non-social signals).

### 6.2 Privacy-Preserving Discovery

Data collection by indexers is designed to be privacy-preserving:
* **Data collection:** Indexers only collect publicly available site metadata (from `site.yaml` or announced data) and the text of public content for search indexing purposes.
* **Anonymity:** No personal user information (beyond what users voluntarily make public on their sites) is required by indexers.
* **User control:** Users control their participation by choosing whether or not to announce their site to any indexers.

Search features provided by indexers would include full-text search of indexed public content, tag-based filtering, and author/site discovery based on public site metadata.

## 7. Trust and Security

### 7.1 Threat Model

Signum aims to protect against:
* Platform lock-in (users own their content and can host anywhere).
* Surveillance (no central tracking of browsing/reading habits within the core protocol; published sites are static and tracker-free by default).
* Censorship (facilitated by distributed hosting options and client-side social graph construction).

Signum does not inherently protect against:
* Hosting provider takedowns (though content can be re-hosted elsewhere).
* Sophisticated government-level censorship or network attacks.
* Compromise of the user's client device or hosting provider.
* Modification of user-published content or scripts by user or other parties.

### 7.2 Privacy Protection

**Privacy protection:** Minimal JavaScript is included in user-authored published content by default. No third-party resources are embedded by default. The core platform and default published sites do not use cookies or tracking mechanisms. Users can choose to publish anonymously by managing the link between their site and real-world identity. Social graph data (like `follows.yaml`) is public but is processed client-side, avoiding central aggregation of social connections.

### 7.3 Core Security Features

*   **Passkey Authentication:** Familiar, secure authentication using device biometrics or PIN, backed by hardware security.
*   **Derived Cryptography:** Site-specific keys derived from passkey credentials, ensuring consistent identity while maintaining security.
*   **Optional Secure Backup:** For Signum hosting users, enterprise-grade encrypted key backup with multi-factor recovery.
*   **Draft Exposure:** Draft content is included in published bundles as raw Markdown but not rendered to HTML. This enables device sync while maintaining simplicity.

### 7.4 Optional Advanced Security Features (Future)

To enhance trust and verify the authenticity and integrity of published content and the basic web viewing experience, several opt-in verification mechanisms are planned for future development.

#### 7.4.1 Opt-in Site Content Signing & Verification

**Concept:** While base Signum sites can be published as simple, unsigned text files for maximum simplicity, site owners will have the optional ability to cryptographically sign their content bundles.

**Mechanism:**
* The Signum client will allow users to sign their `manifest.json` file using their private Ed25519 key (associated with their Site ID).
* This signed manifest contains checksums for all content files in the bundle.
* Other Signum clients can then fetch the site, verify the signature on the manifest using the site owner's public key, and subsequently verify the integrity of each content file against the checksums in the trusted manifest.

**Benefits:** Provides strong proof that the content originates from the claimed author (identified by their Site ID) and has not been tampered with since it was signed.

#### 7.4.2 Optional DNS-Based Domain Verification

**Concept:** To further enhance trust for sites using custom domains, an optional verification method linking the Signum Site ID to DNS ownership is planned.

**Mechanism:**
* Site owners can publish their Signum public key in a specific DNS TXT record for their custom domain.
* Signum clients can fetch this public key from DNS and use it to verify the signature on the site's `manifest.json` (if the site owner has opted into content signing).

**Benefits:** Provides a strong link between domain ownership and the cryptographic identity of the Signum site, offering a "verified" status.

#### 7.4.3 Standardized Web Viewer Script Integrity

**Concept:** To ensure the integrity of the basic web viewing experience and protect against tampering (e.g., injection of tracking code), standardized viewer scripts will be verifiable.

**Mechanism:**
* The Signum client will generate HTML with Subresource Integrity (SRI) attributes for standardized viewer scripts and stylesheets.
* The hashes for these SRI attributes will be based on official versions released by the Signum project.
* Browsers supporting SRI will automatically refuse to load scripts if their content does not match the official hash, preventing execution of tampered scripts.
* The `manifest.json` will also include these official hashes for reference and verification by full Signum clients.

**Benefits:** Protects users accessing Signum sites via a standard web browser from malicious or altered scripts, upholding the platform's privacy and security principles.

## 8. Development Roadmap

### 8.1 Core Platform (MVP Focus)
*   Passkey-based identity with device authentication.
*   Basic Signum hosting service (free subdomains, secure key backup).
*   Enhanced RSS reader with social YAML processing.
*   Content creation (public pages, drafts). Central `content/images/`. Basic `site.yaml`.
*   SSG: Client-side to produce basic static HTML/CSS site at bundle root, excluding drafts from HTML generation.
*   Source Packaging: Public `content/`, `drafts/`, `site.yaml` into `_signum/`.
*   Metadata: `rss.xml` (root), `_signum/manifest.json`, `_signum/index.html` (CTA page).
*   Publishing: One-click to Signum hosting, download ZIP for self-hosting.
*   QR code sync and JSON export/import for device management.
*   Basic indexer infrastructure for content discovery.

### 8.2 Social Features & Enhanced Client
*   Client-side Follow system (editing `follows.yaml`, client parsing of followed sites' data).
*   Client-side Curation lists (editing `curations.yaml`, client parsing).
*   Client-side Content "Like" system (public bookmarking via `likes.yaml`, client interpretation).
*   Client-side feed aggregation and "sites+n" graph traversal logic.
*   Client-side distributed moderation tools (interpreting `blocks.yaml`).
*   Basic discovery features via indexers (site announcement, simple search).
*   API-based publishing adapters.
*   Passkey integration.
*   Enhanced sync and backup options.

### 8.3 Advanced Features & Ecosystem
*   **Theming System:** Define structure, simple templating API (HTML/CSS output). Default themes. UI for theme selection/import.
*   Mobile client application (React Native) with efficient background sync and native rendering.
*   Desktop client application (Tauri) with robust background sync and high-performance rendering.
*   Signum hosting Pro tier with custom domains and advanced features.
*   Advanced hosting adapters (GitHub Pages, Netlify, S3, etc.).
*   Import tools for migrating content from platforms like WordPress or Medium.
*   Collaboration features for multi-author sites (still resulting in a single content bundle).
*   Advanced `site.yaml` options and customization within the client.
*   Enhanced indexer capabilities (more sophisticated search, content-based trending).
*   Image processing during SSG.
*   Optional advanced security features (content signing, DNS verification, SRI).

### 8.4 Long-term Growth & Sustainability
*   Third-party client support.
*   Plugin system.
*   Enterprise features.
*   Developer API/SDK.
*   Creator monetization.

## 9. API Reference (Conceptual)
*   **Client API (Internal):** Content management, site building, sync operations, social graph processing.
*   **Hosting API (Example):** Deploy bundle to various static hosts.
*   **Discovery API (Indexers):** 
    *   `POST /announce` - Announce site or site update (URL, metadata, tags, optional signature)
    *   `GET /search` - Search for sites/content by keywords or tags
    *   `GET /trending` - Retrieve trending content based on non-social signals

## 10. Contributing and Community
Open, community-driven. Guidelines and resources to be developed.

## 11. Legal and Compliance
*   **Privacy Policy:** Emphasize user control, minimal data collection. Clarify that draft content is included in published bundles but not rendered to HTML.
*   **Content Policy:** User responsibility. Limited platform liability. User-driven moderation.

## 12. Technical FAQ
*   **Q: How is content displayed?**
    A: Published sites are static HTML/CSS at the bundle root for direct browser viewing. Signum clients and other tools can access raw Markdown/YAML source from the `_signum/content/` subdirectory and drafts from `_signum/drafts/` within the same bundle for alternative rendering or editing.
*   **Q: How are drafts handled?**
    A: Stored locally in browser storage and included as raw Markdown files in `_signum/drafts/` within the published bundle. Not rendered into public HTML but available for other Signum clients to access for editing when authenticated as the site owner.
*   **Q: What if I lose my client data?**
    A: **Signum Hosting Users:** Simply sign in with your passkey on any device - all data is automatically restored. **Self-Hosted Users:** Import backup JSON file or sync from another device using QR codes. Some data (site keys, basic configs) can be re-derived from your passkey even without backups.
*   **Q: How do I sync between devices?**
    A: **Signum Hosting Users:** Automatic sync via secure cloud backup. **Self-Hosted Users:** Use QR codes for instant device-to-device sync or export/import JSON files.
*   **Q: Do I need to manage seed phrases or complex passwords?**
    A: No! Signum uses device passkeys (Face ID, Touch ID, Windows Hello) for secure, familiar authentication. No seed phrases to write down or lose.
*   **Q: SEO?**
    A: Excellent due to static HTML/CSS output. `rss.xml` and `sitemap.xml` also help.
*   **Q: Social features?**
    A: Via public YAML files in `_signum/` (follows, likes, curations, blocks), processed client-side. No central aggregation - each client builds its own social graph by fetching these files from followed sites.
*   **Q: How do I discover new content?**
    A: Through client-side social features (following sites, viewing curations), RSS feeds, and optionally via indexers that provide search and trending content discovery.
*   **Q: What about moderation?**
    A: User-controlled via personal `blocks.yaml` files. Clients can optionally import block lists from trusted sources. No central moderation authority.
*   **Q: Are my drafts private?**
    A: Drafts are included in the published bundle as raw Markdown files but are not rendered to HTML and are not linked or indexed. They are accessible to other Signum clients for editing purposes when authenticated as the site owner.

## Conclusion

Signum aims to offer a novel approach to online publishing, placing paramount importance on user ownership, data portability, privacy, and simplicity. By enabling the client to act as an enhanced RSS reader and Static Site Generator producing standard HTML/CSS sites at the root of a published bundle, Signum ensures broad accessibility and performance. By including raw source content (Markdown, YAML, images) and drafts within a dedicated `_signum/` subdirectory in the same bundle, Signum preserves true content ownership, portability, and enables a rich ecosystem for diverse client applications.

The user's passkey-based cryptographic identity provides secure, familiar authentication while eliminating the complexity of seed phrase management. The optional Signum hosting service offers a clear path from beginner convenience to advanced self-hosting, enabling progressive decentralization as users mature.

Through this approach of familiar tools (RSS readers, markdown editors), modern authentication (passkeys), and optional hosted services, Signum makes decentralized publishing accessible to mainstream users while maintaining the core principles of ownership, portability, and privacy that differentiate it from traditional platforms.